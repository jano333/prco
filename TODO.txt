------------------------------------------------------------------------------------------------------------------------
 brendon pre pampers nefunguje:
 'https://www.brendon.sk/search?q=pampers':
------------------------------------------------------------------------------------------------------------------------
zle vypisy, preco 0/0 a na konci je << updateProductData eshop KID_MARKET, productForUpdateIds count 1
2019-08-27 12:37:20,119 DEBUG [KID_MARKET-thread] [] s.h.p.s.Starter [Starter.java:242] >> eshop: KID_MARKET, updated/waiting: 0/0
2019-08-27 12:37:20,119 DEBUG [KID_MARKET-thread] [] s.h.p.t.EshopTaskManagerImpl [EshopTask.kt:149] marking task for eshop KID_MARKET as FINISHED_OK
2019-08-27 12:37:20,119 DEBUG [KID_MARKET-thread] [] s.h.p.m.u.NgUpdateProductDataManagerImpl [NgUpdateProductDataManagerImpl.kt:187] << updateProductData eshop KID_MARKET, productForUpdateIds count 1
------------------------------------------------------------------------------------------------------------------------
2019-08-22 12:46:24,125 ERROR [FEEDO-thread] [] o.h.i.ExceptionMapperStandardImpl [ExceptionMapperStandardImpl.java:39] HHH000346: Error during managed flush [org.hibernate.exception.ConstraintViolationException: could not execute statement]
2019-08-22 12:46:24,125 ERROR [FEEDO-thread] [] s.h.p.m.a.AddingNewProductManagerImpl [AddingNewProductManagerImpl.kt:288] error while creating new product from URL for eshop FEEDO
sk.hudak.prco.manager.addprocess.CreateNewProductsForUrlsException: error while creating new product from URL for eshop FEEDO
	at sk.hudak.prco.manager.addprocess.AddingNewProductManagerImpl.createNewProductsErrorWrapper(AddingNewProductManagerImpl.kt:135)
	at sk.hudak.prco.manager.addprocess.AddingNewProductManagerImpl.access$createNewProductsErrorWrapper(AddingNewProductManagerImpl.kt:24)
	at sk.hudak.prco.manager.addprocess.AddingNewProductManagerImpl$addNewProductsByKeywordForEshop$1.doInRunnable(AddingNewProductManagerImpl.kt:72)
	at sk.hudak.prco.task.ExceptionHandlingRunnable.run(EshopTask.kt:187)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)
	at java.lang.Thread.run(Thread.java:745)
Caused by: org.springframework.dao.DataIntegrityViolationException: could not execute statement; SQL [n/a]; constraint ["UK_Q38OW0XNE3DVN4HQ7G29YV9R0_INDEX_D ON PUBLIC.NEW_PRODUCT(URL) VALUES ('https://www.feedo.sk/nutrilon-2-350g-dojcenske-mlieko/', 892)"; SQL statement:
insert into new_product (created, updated, confirm_validity, eshop_uuid, name, picture_url, unit, unit_package_count, unit_value, url, valid, id) values (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) [23505-196]]; nested exception is org.hibernate.exception.ConstraintViolationException: could not execute statement
	at org.springframework.orm.jpa.vendor.HibernateJpaDialect.convertHibernateAccessException(HibernateJpaDialect.java:259)
	at org.springframework.orm.jpa.vendor.HibernateJpaDialect.translateExceptionIfPossible(HibernateJpaDialect.java:225)
	at org.springframework.orm.jpa.JpaTransactionManager.doCommit(JpaTransactionManager.java:540)
	at org.springframework.transaction.support.AbstractPlatformTransactionManager.processCommit(AbstractPlatformTransactionManager.java:746)
	at org.springframework.transaction.support.AbstractPlatformTransactionManager.commit(AbstractPlatformTransactionManager.java:714)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.commitTransactionAfterReturning(TransactionAspectSupport.java:532)
------------
toto nizsie nefunguje ani tak ako som popisal:
dalo:
2019-08-19 15:52:40,016 DEBUG [PILULKA_24-thread] [] s.h.p.p.e.JSoupProductParser [JSoupProductParser.kt:246]
request URL: https://www.pilulka24.sk/lovela
a ma byt:
https://www.pilulka24.sk/vyhladavanie?q=lovela
pre nutrilon to funguje ale pre lovela nie a potom
https://www.pilulka24.sk/vyhladavanie?q=nutrilon
vrati redirect na toto:
https://www.pilulka24.sk/nutrilon
takze vsetko urobit po novom
------------
https://stackoverflow.com/questions/30549489/what-is-this-spring-jpa-open-in-view-true-property-in-spring-boot
2019-08-19 15:49:49,139 WARN [main] [] o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration$JpaWebMvcConfiguration [JpaBaseConfiguration.java:235] spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
------------
2019-08-19 14:59:28,949 DEBUG [MALL-thread] [] s.h.p.m.a.NgAddingNewProductManagerImpl [NgAddingNewProductManagerImpl.kt:148] starting 3 of 4
2019-08-19 14:59:28,949 DEBUG [MALL-thread] [] s.h.p.p.e.JSoupProductParser [JSoupProductParser.kt:246] request URL: https://www.mall.sk/detske-mlieka/nutrilon-nutrilon-1-ha-prosyneo-specialne-dojcenske-mlieko-6x800-g
2019-08-19 14:59:28,949 DEBUG [MALL-thread] [] s.h.p.p.e.JSoupProductParser [JSoupProductParser.kt:249] userAgent: Mozilla/5.0 (Windows NT 6.1; WOW64; Trident/7.0; AS; rv:11.0) like Gecko
2019-08-19 14:59:28,980 DEBUG [MALL-thread] [] s.h.p.s.PrcoCustomTrustManager [SSLHandling.kt:273] server cert subject name CN=www.mall.sk,OU=IT Operations,O=Internet Mall Slovakia s.r.o.,L=Bratislava,C=SK,2.5.4.5=#130a33352039353020323236,1.3.6.1.4.1.311.60.2.1.3=#1302534b,2.5.4.15=#0c1450726976617465204f7267616e697a6174696f6e
2019-08-19 14:59:28,980 DEBUG [MALL-thread] [] s.h.p.s.PrcoCustomTrustManager [SSLHandling.kt:282] delegating checking to java default trust manager
2019-08-19 14:59:29,840 DEBUG [MALL-thread] [] s.h.p.p.u.UnitParserImpl [UnitParserImpl.kt:30] parsing product name to retrieve unit info: Nutrilon Nutrilon 1 HA PROSYNEO špeciálne dojčenské mlieko 6x800 g
2019-08-19 14:59:29,855 DEBUG [MALL-thread] [] s.h.p.s.i.NewProductServiceImpl [NewProductServiceImpl.kt:77] create new entity NewProductEntity with id 11276
2019-08-19 14:59:29,855 WARN [MALL-thread] [] o.h.e.j.s.SqlExceptionHelper [SqlExceptionHelper.java:129] SQL Error: 23505, SQLState: 23505
2019-08-19 14:59:29,855 ERROR [MALL-thread] [] o.h.e.j.s.SqlExceptionHelper [SqlExceptionHelper.java:131] Unique index or primary key violation: "UK_Q38OW0XNE3DVN4HQ7G29YV9R0_INDEX_D ON PUBLIC.NEW_PRODUCT(URL) VALUES ('https://www.mall.sk/detske-mlieka/nutrilon-nutrilon-1-ha-prosyneo-specialne-dojcenske-mlieko-6x800-g', 851)"; SQL statement:
insert into new_product (created, updated, confirm_validity, eshop_uuid, name, picture_url, unit, unit_package_count, unit_value, url, valid, id) values (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) [23505-196]
2019-08-19 14:59:29,855 ERROR [MALL-thread] [] o.h.i.ExceptionMapperStandardImpl [ExceptionMapperStandardImpl.java:39] HHH000346: Error during managed flush [org.hibernate.exception.ConstraintViolationException: could not execute statement]
2019-08-19 14:59:29,871 ERROR [MALL-thread] [] s.h.p.m.a.NgAddingNewProductManagerImpl [NgAddingNewProductManagerImpl.kt:289] error while creating new product from URL for eshop MALL
sk.hudak.prco.manager.addprocess.CreateNewProductsForUrlsException: error while creating new product from URL for eshop MALL
	at sk.hudak.prco.manager.addprocess.NgAddingNewProductManagerImpl.createNewProductsErrorWrapper(NgAddingNewProductManagerImpl.kt:136)
	at sk.hudak.prco.manager.addprocess.NgAddingNewProductManagerImpl.access$createNewProductsErrorWrapper(NgAddingNewProductManagerImpl.kt:25)
	at sk.hudak.prco.manager.addprocess.NgAddingNewProductManagerImpl$addNewProductsByKeywordForEshop$1.doInRunnable(NgAddingNewProductManagerImpl.kt:73)
	at sk.hudak.prco.task.ExceptionHandlingRunnable.run(EshopTask.kt:187)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)
	at java.lang.Thread.run(Thread.java:745)
Caused by: org.springframework.dao.DataIntegrityViolationException: could not execute statement; SQL [n/a]; constraint ["UK_Q38OW0XNE3DVN4HQ7G29YV9R0_INDEX_D ON PUBLIC.NEW_PRODUCT(URL) VALUES ('https://www.mall.sk/detske-mlieka/nutrilon-nutrilon-1-ha-prosyneo-specialne-dojcenske-mlieko-6x800-g', 851)"; SQL statement:
insert into new_product (created, updated, confirm_validity, eshop_uuid, name, picture_url, unit, unit_package_count, unit_value, url, valid, id) values (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) [23505-196]]; nested exception is org.hibernate.exception.ConstraintViolationException: could not execute statement
	at org.springframework.orm.jpa.vendor.HibernateJpaDialect.convertHibernateAccessException(HibernateJpaDialect.java:259)
	at org.springframework.orm.jpa.vendor.HibernateJpaDialect.translateExceptionIfPossible(HibernateJpaDialect.java:225)
	at org.springframework.orm.jpa.JpaTransactionManager.doCommit(JpaTransactionManager.java:540)
	at org.springframework.transaction.support.AbstractPlatformTransactionManager.processCommit(AbstractPlatformTransactionManager.java:746)
	at org.springframework.transaction.support.AbstractPlatformTransactionManager.commit(AbstractPlatformTransactionManager.java:714)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.commitTransactionAfterReturning(TransactionAspectSupport.java:532)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:304)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:98)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:185)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:688)
	at sk.hudak.prco.service.impl.InternalTxServiceImpl$$EnhancerBySpringCGLIB$$92d6a5e.createNewProduct(<generated>)
	at sk.hudak.prco.manager.addprocess.NgAddingNewProductManagerImpl.processNewProductUrl(NgAddingNewProductManagerImpl.kt:189)
	at sk.hudak.prco.manager.addprocess.NgAddingNewProductManagerImpl.createNewProducts(NgAddingNewProductManagerImpl.kt:151)
	at sk.hudak.prco.manager.addprocess.NgAddingNewProductManagerImpl.createNewProductsErrorWrapper(NgAddingNewProductManagerImpl.kt:133)
	... 8 common frames omitted
Caused by: org.hibernate.exception.ConstraintViolationException: could not execute statement
	at org.hibernate.exception.internal.SQLStateConversionDelegate.convert(SQLStateConversionDelegate.java:112)
	at org.hibernate.exception.internal.StandardSQLExceptionConverter.convert(StandardSQLExceptionConverter.java:42)
	at org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:111)
	at org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:97)
	at org.hibernate.engine.jdbc.internal.ResultSetReturnImpl.executeUpdate(ResultSetReturnImpl.java:178)
	at org.hibernate.persister.entity.AbstractEntityPersister.insert(AbstractEntityPersister.java:3032)
	at org.hibernate.persister.entity.AbstractEntityPersister.insert(AbstractEntityPersister.java:3547)
	at org.hibernate.action.internal.EntityInsertAction.execute(EntityInsertAction.java:89)
	at org.hibernate.engine.spi.ActionQueue.executeActions(ActionQueue.java:600)
	at org.hibernate.engine.spi.ActionQueue.executeActions(ActionQueue.java:474)
	at org.hibernate.event.internal.AbstractFlushingEventListener.performExecutions(AbstractFlushingEventListener.java:337)
	at org.hibernate.event.internal.DefaultFlushEventListener.onFlush(DefaultFlushEventListener.java:39)
	at org.hibernate.internal.SessionImpl.doFlush(SessionImpl.java:1437)
	at org.hibernate.internal.SessionImpl.managedFlush(SessionImpl.java:494)
	at org.hibernate.internal.SessionImpl.flushBeforeTransactionCompletion(SessionImpl.java:3245)
	at org.hibernate.internal.SessionImpl.beforeTransactionCompletion(SessionImpl.java:2451)
	at org.hibernate.engine.jdbc.internal.JdbcCoordinatorImpl.beforeTransactionCompletion(JdbcCoordinatorImpl.java:473)
	at org.hibernate.resource.transaction.backend.jdbc.internal.JdbcResourceLocalTransactionCoordinatorImpl.beforeCompletionCallback(JdbcResourceLocalTransactionCoordinatorImpl.java:156)
	at org.hibernate.resource.transaction.backend.jdbc.internal.JdbcResourceLocalTransactionCoordinatorImpl.access$100(JdbcResourceLocalTransactionCoordinatorImpl.java:38)
	at org.hibernate.resource.transaction.backend.jdbc.internal.JdbcResourceLocalTransactionCoordinatorImpl$TransactionDriverControlImpl.commit(JdbcResourceLocalTransactionCoordinatorImpl.java:231)
	at org.hibernate.engine.transaction.internal.TransactionImpl.commit(TransactionImpl.java:68)
	at org.springframework.orm.jpa.JpaTransactionManager.doCommit(JpaTransactionManager.java:536)
	... 19 common frames omitted
Caused by: org.h2.jdbc.JdbcSQLException: Unique index or primary key violation: "UK_Q38OW0XNE3DVN4HQ7G29YV9R0_INDEX_D ON PUBLIC.NEW_PRODUCT(URL) VALUES ('https://www.mall.sk/detske-mlieka/nutrilon-nutrilon-1-ha-prosyneo-specialne-dojcenske-mlieko-6x800-g', 851)"; SQL statement:
insert into new_product (created, updated, confirm_validity, eshop_uuid, name, picture_url, unit, unit_package_count, unit_value, url, valid, id) values (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) [23505-196]
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:345)
	at org.h2.message.DbException.get(DbException.java:179)
	at org.h2.message.DbException.get(DbException.java:155)
	at org.h2.index.BaseIndex.getDuplicateKeyException(BaseIndex.java:103)
	at org.h2.mvstore.db.MVSecondaryIndex.checkUnique(MVSecondaryIndex.java:231)
	at org.h2.mvstore.db.MVSecondaryIndex.add(MVSecondaryIndex.java:190)
	at org.h2.mvstore.db.MVTable.addRow(MVTable.java:705)
	at org.h2.command.dml.Insert.insertRows(Insert.java:156)
	at org.h2.command.dml.Insert.update(Insert.java:114)
	at org.h2.command.CommandContainer.update(CommandContainer.java:101)
	at org.h2.command.Command.executeUpdate(Command.java:260)
	at org.h2.jdbc.JdbcPreparedStatement.executeUpdateInternal(JdbcPreparedStatement.java:164)
	at org.h2.jdbc.JdbcPreparedStatement.executeUpdate(JdbcPreparedStatement.java:150)
	at com.zaxxer.hikari.pool.ProxyPreparedStatement.executeUpdate(ProxyPreparedStatement.java:61)
	at com.zaxxer.hikari.pool.HikariProxyPreparedStatement.executeUpdate(HikariProxyPreparedStatement.java)
	at org.hibernate.engine.jdbc.internal.ResultSetReturnImpl.executeUpdate(ResultSetReturnImpl.java:175)
	... 36 common frames omitted
2019-08-19 14:59:29,871 DEBUG [MALL-thread] [] s.h.p.t.EshopTaskManagerImpl [EshopTask.kt:149] marking task for eshop MALL as FINISHED_WITH_ERROR
2019-08-19 14:59:29,871 DEBUG [MALL-thread] [] s.h.p.s.i.ErrorServiceImpl [ErrorServiceImpl.kt:103] create entity ErrorEntity with id 5855 msg: error while creating new product from URL for eshop MALL
2019-08-19 14:59:29,871 DEBUG [MALL-thread] [] s.h.p.m.a.NgAddingNewProductManagerImpl [NgAddingNewProductManagerImpl.kt:83] << addNewProductsByKeywordForEshop eshop MALL, searchKeyWord nutrilon
2019-08-19 14:59:30,027 DEBUG [main] [] s.h.p.t.EshopTaskManagerImpl [EshopTask.kt:112] submitting new task for eshop MALL
2019-08-19 14:59:30,027 DEBUG [MALL-thread] [] s.h.p.m.a.NgAddingNewProductManagerImpl [NgAddingNewProductManagerImpl.kt:62] >> addNewProductsByKeywordForEshop eshop MALL, searchKeyWord lovela
----------------------------
********************
For KOTLIN remove Optional keyword, use ? instead
*****************************************************************************************
dava zle automaticky groupu:
Pampers Pure Protection 3 6-10 kg plienkové nohavičky 31 kusov
a dava
PAMPERS_ZELENE_3
TODO: urobit group keywordy aj pre pants vsetky velkosti a prest zoznam notinteresting s nazvom pampers
*****************************************************************************************
Pampers New Baby-Dry 3-6kg veľ.2 43ks
pampers 2 zelene
*********************************
Pampers New Baby-Dry 2-5kg veľ.1 43ks
pampes 1 zelene
*********************************
Pampers Active Baby Mini 4-8kg veľ.2 100ks
pampers 2 zelene
*********************************
Pampers Active Baby 11-16kg veľ.5 64ks
pridat ako grupa pampes 5 zelene
*********************************
Pampers Active Baby plienky Extra Large veľ.6 13-18kg 56ks
pridat ako grupa pampers 4 zelene
*********************************
----------------------------
TODO overit ci sa dana chyba ulozi do DB
2019-06-07 13:55:40,211 DEBUG [MAXIKOVY_HRACKY] [] s.h.p.t.i.EshopTaskManagerImpl [EshopTaskManagerImpl.java:126] task status TaskContext(status=STOPPED, lastChanged=Fri Jun 07 13:55:18 CEST 2019)
2019-06-07 13:55:40,211 DEBUG [MAXIKOVY_HRACKY] [] s.h.p.t.i.EshopTaskManagerImpl [EshopTaskManagerImpl.java:90] marking task for eshop MAXIKOVY_HRACKY as RUNNING
2019-06-07 13:55:40,215 DEBUG [MAXIKOVY_HRACKY] [] s.h.p.s.Starter [Starter.java:231] >> eshop: MAXIKOVY_HRACKY, updated/waiting: 0/17
2019-06-07 13:55:40,215 DEBUG [MAXIKOVY_HRACKY] [] s.h.p.p.i.JSoupProductParser [JSoupProductParser.java:227] request URL: https://www.maxikovy-hracky.cz/pampers-active-baby-monthly-box-s4-152ks
2019-06-07 13:55:40,216 DEBUG [MAXIKOVY_HRACKY] [] s.h.p.p.i.JSoupProductParser [JSoupProductParser.java:230] userAgent: Mozilla/5.0 (Windows NT 6.1; WOW64; Trident/7.0; AS; rv:11.0) like Gecko
2019-06-07 13:55:40,289 DEBUG [MAXIKOVY_HRACKY] [] s.h.p.s.PrcoCustomTrustManager [PrcoCustomTrustManager.java:53] delegating checking to java default trust manager
2019-06-07 13:55:40,541 ERROR [MAXIKOVY_HRACKY] [] s.h.p.m.i.ErrorHandlerImpl [ErrorHandlerImpl.java:31] error while parsing product data for product https://www.maxikovy-hracky.cz/pampers-active-baby-monthly-box-s4-152ks
sk.hudak.prco.exception.PrcoRuntimeException: error while converting value 999 Kč to java.math.BigDecimal
	at sk.hudak.prco.utils.ConvertUtils.convertToBigDecimal(ConvertUtils.java:23)
	at java.util.Optional.map(Optional.java:215)
	at sk.hudak.prco.eshop.MaxikovyHrackyProductParser.parseProductPriceForPackage(MaxikovyHrackyProductParser.java:102)
	at sk.hudak.prco.parser.eshop.JSoupProductParser.parseProductUpdateData(JSoupProductParser.java:197)
	at sk.hudak.prco.parser.impl.JsoupHtmlParser.parseProductUpdateData(JsoupHtmlParser.java:58)
	at sk.hudak.prco.manager.impl.UpdateProductDataManagerImpl.parseOneProductUpdateData(UpdateProductDataManagerImpl.java:171)
	at sk.hudak.prco.manager.impl.UpdateProductDataManagerImpl.internalParseAndUpdate(UpdateProductDataManagerImpl.java:163)
	at sk.hudak.prco.manager.impl.UpdateProductDataManagerImpl.lambda$updateProductDataForEachProductInEshop$9(UpdateProductDataManagerImpl.java:98)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)
	at java.lang.Thread.run(Thread.java:745)
Caused by: java.lang.NumberFormatException: null
	at java.math.BigDecimal.<init>(BigDecimal.java:494)
	at java.math.BigDecimal.<init>(BigDecimal.java:383)
	at java.math.BigDecimal.<init>(BigDecimal.java:806)
	at sk.hudak.prco.utils.ConvertUtils.convertToBigDecimal(ConvertUtils.java:20)
	... 12 common frames omitted
2019-06-07 13:55:40,541 DEBUG [MAXIKOVY_HRACKY] [] s.h.p.t.i.EshopTaskManagerImpl [EshopTaskManagerImpl.java:96] marking task for eshop MAXIKOVY_HRACKY as FINISHED_WITH_ERROR
2019-06-07 13:55:40,547 DEBUG [BRENDON] [] s.h.p.s.Starter [Starter.java:231] >> eshop: BRENDON, updated/waiting: 1/8
2019-06-07 13:55:40,548 DEBUG [BRENDON] [] s.h.p.p.i.JSoupProductParser [JSoupProductParser.java:227] request URL: https://www.brendon.sk/Products/Details/118431
2019-06-07 13:55:40,548 DEBUG [BRENDON] [] s.h.p.p.i.JSoupProductParser [JSoupProductParser.java:230] userAgent: Mozilla/5.0 (Windows NT 6.1; WOW64; rv:40.0) Gecko/20100101 Firefox/40.1
2019-06-07 13:55:40,952 WARN [BRENDON] [] s.h.p.p.i.JSoupProductParser [JSoupProductParser.java:178] redirecting:
2019-06-07 13:55:40,952 WARN [BRENDON] [] s.h.p.p.i.JSoupProductParser [JSoupProductParser.java:179] from https://www.brendon.sk/Products/Details/118431



-----------------------------------------------------------------------------------------------------------------------
49:
-----------------------------------------------------------------------------------------------------------------------
22 BUG
Je to toiste(prest vsetky eshopy a vypisat duplicity na zaklade nazvu) !!!
4. 0.22500€/kus 14,40€/balenie https://kidmarket.sk/jednorazove-plienky/177-pampers-active-baby-5-giant-pack-64ks.html
5. 0.22500€/kus 14,40€/balenie https://kidmarket.sk/active-baby/177-pampers-active-baby-5-giant-pack-64ks-8001090278067.html
-----------------------------------------------------------------------------------------------------------------------
21 BUG
!!! do nutrilon groupy som pridal aj vanilku
-----------------------------------------------------------------------------------------------------------------------
45 BUG
overit MOJA_LEKAREN lebo neako stale mi dava vela novych produktov ci je to ok
-----------------------------------------------------------------------------------------------------------------------
46 FEATURE
!!! ak ide o pridanie noveho produktu a produkt je nedostupny tak preskakovat dany produkt a ist na dalsi !!!
-----------------------------------------------------------------------------------------------------------------------
32 FEATURE
FEATURE: ked spadne update jedneho produktu na 'SocketTimeoutException: Read timed out' tak nech pokracuje update dalsich, ale len pre dany typ chyby
-----------------------------------------------------------------------------------------------------------------------

*************************************************************************************


47 BUG MINOR
Pampers Pampers Premium Care, Veľkosť 6, Plienka 38x
nevie rozpoznat groupu
-----------------------------------------------------------------------------------------------------------------------
31 BUG PILULKA
produktu je nedostupny a nevyparsuje nam ani meno....
2019-05-03 09:48:49,693 WARN [main] [] s.h.p.p.i.JSoupProductParser [JSoupProductParser.java:332] property productName is null for product url https://www.pilulka.sk/pampers-active-baby-4-8-14kg-monthly-box-174ks-utierky-zadarmo
ProductNewData(url=https://www.pilulka.sk/pampers-s4-active-baby-monthly-box-174ks, name=null, eshopUuid=PILULKA, unit=null, unitValue=null, unitPackageCount=null, pictureUrl=null)
-----------------------------------------------------------------------------------------------------------------------
14
BUG: dvojite lomitka:
https://www.mojalekaren.sk//pampers-active-baby-dry-5-junior-11-18kg-150-kusov/
----------------------------------
13
BUG:
https://www.mojalekaren.sk//nutrilon-comfort-1-400g/
tento produkt neexistuje a vrati 302 na https://www.mojalekaren.sk/, potrebujem urobit to aby som to odchytil
------------------------------------------------------------------------------
12
BUG:
PAMPERS Plienky Active Baby-Dry Mega Quad S4
ma na konci nieco co vyzera ako medzera ale nie je to medzera
-----------------------------------------------------------------------------------------------------------------------
9
BUG
duplicita v grupe:
eshop: KID_MARKET price for unit 0.25618, price for one item 28.18, id 2113, 'Pampers Active Baby 5 Megapack+ 11-16Kg 110ks', https://kidmarket.sk/jednorazove-plienky/1046-pampers-active-baby-5-megapack-11-16kg-110ks-8001090951762.html?search_query=pampers&results=44, last updated 03-01-2019 14:48:09
eshop: KID_MARKET price for unit 0.25618, price for one item 28.18, id 2818, 'Pampers Active Baby 5 Megapack+ 11-16Kg 110ks', https://kidmarket.sk/jednorazove-plienky/1046-pampers-active-baby-5-megapack-11-16kg-110ks-8001090951762.html?search_query=pampers&results=39, last updated 03-01-2019 14:55:45
eshop: KID_MARKET price for unit 0.25618, price for one item 28.18, id 2851, 'Pampers Active Baby 5 Megapack+ 11-16Kg 110ks', https://kidmarket.sk/jednorazove-plienky/1046-pampers-active-baby-5-megapack-11-16kg-110ks-8001090951762.html?search_query=pampers&results=37, last updated 03-01-2019 14:56:50
eshop: KID_MARKET price for unit 0.25618, price for one item 28.18, id 2913, 'Pampers Active Baby 5 Megapack+ 11-16Kg 110ks', https://kidmarket.sk/jednorazove-plienky/1046-pampers-active-baby-5-megapack-11-16kg-110ks-8001090951762.html?search_query=pampers&results=42, last updated 03-01-2019 14:57:53
eshop: KID_MARKET price for unit 0.25618, price for one item 28.18, id 2919, 'Pampers Active Baby 5 Megapack+ 11-16Kg 110ks', https://kidmarket.sk/jednorazove-plienky/1046-pampers-active-baby-5-megapack-11-16kg-110ks-8001090951762.html?search_query=pampers&results=38, last updated 03-01-2019 14:58:59
--------------------------------------------------------------------------------------------------------------------
6
2018-08-08 15:10:57,680 ERROR [HORNBACH] [] s.h.p.m.i.AddingNewProductManagerImpl [AddingNewProductManagerImpl.java:82] error while creating new product
sk.hudak.prco.exception.PrcoRuntimeException: error while downloading/parsing content for url https://www.hornbach.sk/shop/vyhladavanie/sortiment/nutrilon%205
	at sk.hudak.prco.eshop.HornbachProductParser.retrieveDocument(HornbachProductParser.java:70)
	at sk.hudak.prco.parser.eshop.JSoupProductParser.parseUrlsOfProduct(JSoupProductParser.java:51)
	at sk.hudak.prco.parser.impl.JsoupHtmlParser.searchProductUrls(JsoupHtmlParser.java:41)
	at sk.hudak.prco.manager.impl.AddingNewProductManagerImpl.lambda$addNewProductsByKeywordForEshop$6(AddingNewProductManagerImpl.java:77)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)
	at java.lang.Thread.run(Thread.java:745)
Caused by: java.lang.NullPointerException: null
	at org.apache.http.impl.cookie.PublicSuffixDomainFilter.match(PublicSuffixDomainFilter.java:93)
	at org.apache.http.impl.cookie.CookieSpecBase.match(CookieSpecBase.java:136)
	at org.apache.http.impl.cookie.DefaultCookieSpec.match(DefaultCookieSpec.java:178)
	at org.apache.http.client.protocol.RequestAddCookies.process(RequestAddCookies.java:166)
	at org.apache.http.protocol.ImmutableHttpProcessor.process(ImmutableHttpProcessor.java:133)
	at org.apache.http.impl.execchain.ProtocolExec.execute(ProtocolExec.java:183)
	at org.apache.http.impl.execchain.RetryExec.execute(RetryExec.java:89)
	at org.apache.http.impl.execchain.RedirectExec.execute(RedirectExec.java:111)
	at org.apache.http.impl.client.InternalHttpClient.doExecute(InternalHttpClient.java:185)
	at org.apache.http.impl.client.CloseableHttpClient.execute(CloseableHttpClient.java:72)
	at org.apache.http.impl.client.CloseableHttpClient.execute(CloseableHttpClient.java:221)
	at org.apache.http.impl.client.CloseableHttpClient.execute(CloseableHttpClient.java:165)
	at org.apache.http.impl.client.CloseableHttpClient.execute(CloseableHttpClient.java:140)
	at sk.hudak.prco.eshop.HornbachProductParser.retrieveDocument(HornbachProductParser.java:67)
	... 8 common frames omitted
-------------------------------------------------------------------------------------------------
5
2018-08-07 11:53:12,803 DEBUG [OBI] [] s.h.p.p.i.JSoupProductParser [JSoupProductParser.java:152] request URL: https://www.obi.sk/search/nutrilon%204/?isi=true
2018-08-07 11:53:12,803 DEBUG [OBI] [] s.h.p.p.i.JSoupProductParser [JSoupProductParser.java:155] userAgent: Mozilla/5.0 (compatible, MSIE 11, Windows NT 6.3; Trident/7.0; rv:11.0) like Gecko
2018-08-07 11:53:12,949 DEBUG [OBI] [] s.h.p.s.PrcoCustomTrustManager [PrcoCustomTrustManager.java:41] checkServerTrusted() for hostname CN=*.obi.at,O=OBI Smart Technologies GmbH,L=Wermelskirchen,ST=Nordrhein-Westfalen,C=DE
2018-08-07 11:53:12,950 DEBUG [OBI] [] s.h.p.s.PrcoCustomTrustManager [PrcoCustomTrustManager.java:52] server cert subject name CN=*.obi.at,O=OBI Smart Technologies GmbH,L=Wermelskirchen,ST=Nordrhein-Westfalen,C=DE
2018-08-07 11:53:12,950 DEBUG [OBI] [] s.h.p.s.PrcoCustomTrustManager [PrcoCustomTrustManager.java:53] delegating checking to java default trust manager
2018-08-07 11:53:12,968 ERROR [OBI] [] s.h.p.p.i.JSoupProductParser [JSoupProductParser.java:175] error creating document for url 'https://www.obi.sk/search/nutrilon%204/?isi=true':
javax.net.ssl.SSLHandshakeException: sun.security.validator.ValidatorException: PKIX path building failed: sun.security.provider.certpath.SunCertPathBuilderException: unable to find valid certification path to requested target
	at sun.security.ssl.Alerts.getSSLException(Alerts.java:192)
	at sun.security.ssl.SSLSocketImpl.fatal(SSLSocketImpl.java:1949)
	at sun.security.ssl.Handshaker.fatalSE(Handshaker.java:302)
	at sun.security.ssl.Handshaker.fatalSE(Handshaker.java:296)
	at sun.security.ssl.ClientHandshaker.serverCertificate(ClientHandshaker.java:1506)
	at sun.security.ssl.ClientHandshaker.processMessage(ClientHandshaker.java:216)
	at sun.security.ssl.Handshaker.processLoop(Handshaker.java:979)
	at sun.security.ssl.Handshaker.process_record(Handshaker.java:914)
	at sun.security.ssl.SSLSocketImpl.readRecord(SSLSocketImpl.java:1062)
	at sun.security.ssl.SSLSocketImpl.performInitialHandshake(SSLSocketImpl.java:1375)
	at sun.security.ssl.SSLSocketImpl.startHandshake(SSLSocketImpl.java:1403)
	at sun.security.ssl.SSLSocketImpl.startHandshake(SSLSocketImpl.java:1387)
	at sun.net.www.protocol.https.HttpsClient.afterConnect(HttpsClient.java:559)
	at sun.net.www.protocol.https.AbstractDelegateHttpsURLConnection.connect(AbstractDelegateHttpsURLConnection.java:185)
	at sun.net.www.protocol.https.HttpsURLConnectionImpl.connect(HttpsURLConnectionImpl.java:153)
	at org.jsoup.helper.HttpConnection$Response.execute(HttpConnection.java:652)
	at org.jsoup.helper.HttpConnection$Response.execute(HttpConnection.java:629)
	at org.jsoup.helper.HttpConnection.execute(HttpConnection.java:261)
	at org.jsoup.helper.HttpConnection.get(HttpConnection.java:250)
	at sk.hudak.prco.parser.eshop.JSoupProductParser.retrieveDocument(JSoupProductParser.java:165)
	at sk.hudak.prco.parser.eshop.JSoupProductParser.parseUrlsOfProduct(JSoupProductParser.java:51)
	at sk.hudak.prco.parser.impl.JsoupHtmlParser.searchProductUrls(JsoupHtmlParser.java:41)
	at sk.hudak.prco.manager.impl.AddingNewProductManagerImpl.lambda$addNewProductsByKeywordForEshop$7(AddingNewProductManagerImpl.java:77)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)
	at java.lang.Thread.run(Thread.java:745)
Caused by: sun.security.validator.ValidatorException: PKIX path building failed: sun.security.provider.certpath.SunCertPathBuilderException: unable to find valid certification path to requested target
	at sun.security.validator.PKIXValidator.doBuild(PKIXValidator.java:387)
	at sun.security.validator.PKIXValidator.engineValidate(PKIXValidator.java:230)
	at sun.security.validator.Validator.validate(Validator.java:260)
	at sun.security.ssl.X509TrustManagerImpl.validate(X509TrustManagerImpl.java:324)
	at sun.security.ssl.X509TrustManagerImpl.checkTrusted(X509TrustManagerImpl.java:229)
	at sun.security.ssl.X509TrustManagerImpl.checkServerTrusted(X509TrustManagerImpl.java:105)
	at sk.hudak.prco.ssl.PrcoCustomTrustManager.checkServerTrusted(PrcoCustomTrustManager.java:54)
	at sun.security.ssl.AbstractTrustManagerWrapper.checkServerTrusted(SSLContextImpl.java:922)
	at sun.security.ssl.ClientHandshaker.serverCertificate(ClientHandshaker.java:1488)
	... 23 common frames omitted
Caused by: sun.security.provider.certpath.SunCertPathBuilderException: unable to find valid certification path to requested target
	at sun.security.provider.certpath.SunCertPathBuilder.build(SunCertPathBuilder.java:146)
	at sun.security.provider.certpath.SunCertPathBuilder.engineBuild(SunCertPathBuilder.java:131)
	at java.security.cert.CertPathBuilder.build(CertPathBuilder.java:280)
	at sun.security.validator.PKIXValidator.doBuild(PKIXValidator.java:382)
	... 31 common frames omitted
----------------------
------------------------------------------------------------------------------------------------------------------------
3
TODO: doriesit nove produkty pre ktore nevie vyparsovat unit co mam na UI
------------------------------------------------------------------------------------------------------------------------
2
pre tieto dve nerozpozna unit produktu(nie je tam jednotka len cislo, ide o plienky pre obe URL
https://potravinydomov.itesco.sk/groceries/sk-SK/products/2002121218245
https://potravinydomov.itesco.sk/groceries/sk-SK/products/2002121218256
------------------------------------------------------------------------------------------------------------------------
19
2019-04-01 13:39:25,482 DEBUG [http-nio-8080-exec-2] [] s.h.p.s.i.NewProductServiceImpl [NewProductServiceImpl.java:155] new product with id 8550 was updated with unit data UnitTypeValueCount(unit=KUS, value=51, packageCount=1)
2019-04-01 13:39:25,488 ERROR [http-nio-8080-exec-2] [] o.h.i.ExceptionMapperStandardImpl [ExceptionMapperStandardImpl.java:39] HHH000346: Error during managed flush [Row was updated or deleted by another transaction (or unsaved-value mapping was incorrect) : [sk.hudak.prco.model.NewProductEntity#8550]]
2019-04-01 13:39:25,512 ERROR [http-nio-8080-exec-2] [] o.a.c.c.C.[.[.[.[dispatcherServlet] [DirectJDKLog.java:182] Servlet.service() for servlet [dispatcherServlet] in context with path [] threw exception [Request processing failed; nested exception is org.springframework.orm.ObjectOptimisticLockingFailureException: Object of class [sk.hudak.prco.model.NewProductEntity] with identifier [8550]: optimistic locking failed; nested exception is org.hibernate.StaleObjectStateException: Row was updated or deleted by another transaction (or unsaved-value mapping was incorrect) : [sk.hudak.prco.model.NewProductEntity#8550]] with root cause
org.hibernate.StaleObjectStateException: Row was updated or deleted by another transaction (or unsaved-value mapping was incorrect) : [sk.hudak.prco.model.NewProductEntity#8550]
	at org.hibernate.persister.entity.AbstractEntityPersister.check(AbstractEntityPersister.java:2414)
	at org.hibernate.persister.entity.AbstractEntityPersister.update(AbstractEntityPersister.java:3216)
	at org.hibernate.persister.entity.AbstractEntityPersister.updateOrInsert(AbstractEntityPersister.java:3090)
	at org.hibernate.persister.entity.AbstractEntityPersister.update(AbstractEntityPersister.java:3491)
	at org.hibernate.action.internal.EntityUpdateAction.execute(EntityUpdateAction.java:145)
	at org.hibernate.engine.spi.ActionQueue.executeActions(ActionQueue.java:600)
	at org.hibernate.engine.spi.ActionQueue.executeActions(ActionQueue.java:474)
	at org.hibernate.event.internal.AbstractFlushingEventListener.performExecutions(AbstractFlushingEventListener.java:337)
	at org.hibernate.event.internal.DefaultFlushEventListener.onFlush(DefaultFlushEventListener.java:39)
	at org.hibernate.internal.SessionImpl.doFlush(SessionImpl.java:1437)
	at org.hibernate.internal.SessionImpl.managedFlush(SessionImpl.java:494)
	at org.hibernate.internal.SessionImpl.flushBeforeTransactionCompletion(SessionImpl.java:3245)
	at org.hibernate.internal.SessionImpl.beforeTransactionCompletion(SessionImpl.java:2451)
	at org.hibernate.engine.jdbc.internal.JdbcCoordinatorImpl.beforeTransactionCompletion(JdbcCoordinatorImpl.java:473)
	at org.hibernate.resource.transaction.backend.jdbc.internal.JdbcResourceLocalTransactionCoordinatorImpl.beforeCompletionCallback(JdbcResourceLocalTransactionCoordinatorImpl.java:156)
	at org.hibernate.resource.transaction.backend.jdbc.internal.JdbcResourceLocalTransactionCoordinatorImpl.access$100(JdbcResourceLocalTransactionCoordinatorImpl.java:38)
	at org.hibernate.resource.transaction.backend.jdbc.internal.JdbcResourceLocalTransactionCoordinatorImpl$TransactionDriverControlImpl.commit(JdbcResourceLocalTransactionCoordinatorImpl.java:231)
	at org.hibernate.engine.transaction.internal.TransactionImpl.commit(TransactionImpl.java:68)
	at org.springframework.orm.jpa.JpaTransactionManager.doCommit(JpaTransactionManager.java:536)
	at org.springframework.transaction.support.AbstractPlatformTransactionManager.processCommit(AbstractPlatformTransactionManager.java:746)
	at org.springframework.transaction.support.AbstractPlatformTransactionManager.commit(AbstractPlatformTransactionManager.java:714)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.commitTransactionAfterReturning(TransactionAspectSupport.java:532)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:304)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:98)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:185)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:688)
	at sk.hudak.prco.service.impl.InternalTxServiceImpl$$EnhancerBySpringCGLIB$$48b78007.repairInvalidUnitForNewProductByReprocessing(<generated>)
	at sk.hudak.prco.service.impl.UIServiceImpl.tryToRepairInvalidUnitForNewProductByReprocessing(UIServiceImpl.java:103)
	at sk.hudak.prco.ui.controller.NewProductController.reprocessNewProducts(NewProductController.java:60)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:497)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:209)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:136)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:102)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:877)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:783)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:991)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:925)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:974)
	at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:866)
